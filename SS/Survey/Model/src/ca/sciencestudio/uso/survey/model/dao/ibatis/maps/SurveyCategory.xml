<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Category" >
	<resultMap  class="ca.sciencestudio.uso.survey.model.SurveyCategory" id="surveyCategory">
		<result property="id"           column="category_id"/>
		<result property="name"         column="category_name"/>
		<result property="description"  column="description"/>
	</resultMap>

	<select id="getSurveyCategoryById" resultMap="surveyCategory">
		SELECT * 
			FROM ${database}.survey_category
			WHERE category_id = #value#
	</select>
	
	<insert id="addSurveyCategory">
		INSERT INTO ${database}.survey_category 
			(category_name, description)
		VALUES 
			(#name:VARCHAR#, #description:VARCHAR#)		
		<selectKey resultClass="java.lang.Integer" keyProperty="id">
			 ${identity.function}
		</selectKey>
	</insert>
	
	<delete id="removeSurveyCategory">
		DELETE 
			FROM ${database}.survey_category
			WHERE category_id = #value#
	</delete>
	
	<update id="updateSurveyCategory">
		UPDATE ${database}.survey_category
			SET 
				category_name = #name:VARCHAR#,
				description = #description:VARCHAR#
			WHERE 
				category_id = #id:INTEGER#
	</update>
	
	<select id="getSurveyCategoryList" resultMap="surveyCategory">
		SELECT * 
			FROM ${database}.survey_category
	</select>
</sqlMap>	
